<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="fr" />
  <link rel="shortcut icon" href="./ressources/img/favicon.ico">
  <link rel="stylesheet" href="./ressources/style.css" type="text/css" />

  <script type="text/javascript" src="ressources/js/jquery-1.9.0.min.js"></script>
  <script type="text/javascript" src="./ressources/js/common.js"></script>

  <script type="text/javascript" src="./ressources/js/date.format.js"></script>

  <link rel="stylesheet" href="./ressources/leaflet/leaflet.css">
  <script type="text/javascript" src="./ressources/leaflet/leaflet.js"></script>

  <script type="text/javascript" src="./ressources/js/settings.js"></script>
  <script type="text/javascript" src="./ressources/js/blacklist.js"></script>
  <script type="text/javascript" src="data/events.clean" id="events-file"></script>

  <title>UBPE2013@Valence | Raw data</title>
</head>
<body>

  <div id="tab2">
    <table id="filtered-data">
      <tr id="headers"></tr>
    </table>
  </div>

  <script>
    'use strict';

    (function initTable() {
      var headers = $('#headers');

      var titles = [];
      for (var propName in settings.fieldLabels) {
        var title = settings.fieldLabels[propName];
        if (settings.fieldUnits[propName]) {
          title += "<br />(" + settings.fieldUnits[propName] + ")";
        }
        titles.push(title);
      };
      headers.append('<th>' + titles.join('</th><th>') + '</th>');

    })();

    function updateTable(data) {
      var values = [];
      for (var propName in settings.fieldLabels) {
        values.push(data[propName]);
      };
      $('<tr></tr>').append('<td>' + values.join('</td><td>') + '</td>').insertAfter('#headers');
    }

    updateData(data, updateTable, true);

    var reloadTimer = window.setInterval(function() { loadJsFile('data/events.clean', displayRawData) }, 30000);
  </script>
</body>
</html>
