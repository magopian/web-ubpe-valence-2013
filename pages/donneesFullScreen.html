<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Language" content="fr" />
		<link rel="shortcut icon" href="../ressources/img/favicon.ico">
		<link rel="stylesheet" href="../ressources/style.css" type="text/css"/>
		
		<script type="text/javascript" src="../ressources/js/2012/js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="../ressources/js/2012/js/common.js"></script>
		
		<link rel="stylesheet" href="../ressources/leaflet/leaflet.css">
		<script type="text/javascript" src="../ressources/leaflet/leaflet.js"></script>
		
		<script type="text/javascript" src="../ressources/js/settings.js"></script>
		
		<meta http-equiv="refresh" content="15" > 
		<!-- In firefox : set accessibility.blockautorefresh to false to allow the autorefresh function -->
		
		<title>UBPE 2013 | Tableau)</title>
	</head>
	<body>
		<script>
		//Ouverture du json
		json = updateData();
		
		color = true;
		document.write("<div id=\"tab2\">");
		document.write("<table>");
		document.write("<tr id=\"type-tile\">");
			document.write("<th>Heure</th>");
			document.write("<th>Station</th>");
			document.write("<th>Objet</th>");
			document.write("<th>Trame</th>");
			document.write("<th>Compteur reset</th>");
			document.write("<th>Phase</th>");
			document.write("<th>Dur√©e phase</th>");
			document.write("<th>systemTimeReset</th>");
			document.write("<th>RTCTime</th>");
			document.write("<th>fixGPS</th>");			
			document.write("<th>GPSTime</th>");
			document.write("<th>Longitude</th>");
			document.write("<th>Latitude</th>");
			document.write("<th>Altitude" + "<br/>" + "(" + settings.tabUnites["altGPS"] + ")" + "</th>");
			document.write("<th>Vitesse" + "<br/>" + "(" + settings.tabUnites["speedGPS"] + ")" + "</th>");
			document.write("<th colspan=\"2\">Cap</th>");
			/*document.write("<th>NE DOIT PAS S'AFFICHER (Colonne colspan)</th>");*/
			document.write("<th>Nombre satelites</th>");
			document.write("<th>hdop" + "<br/>" + "(" + settings.tabUnites["hdop"] + ")" + "</th>");
			document.write("<th>sensor1" + "<br/>" + "(" + settings.tabUnites["sensor1"] + ")" + "</th>");
			document.write("<th>sensor2" + "<br/>" + "(" + settings.tabUnites["sensor2"] + ")" + "</th>");
			document.write("<th>sensor3" + "<br/>" + "(" + settings.tabUnites["sensor3"] + ")" + "</th>");
			document.write("<th>sensor4" + "<br/>" + "(" + settings.tabUnites["sensor4"] + ")" + "</th>");
			document.write("<th>Tension" + "<br/>" + "(" + settings.tabUnites["voltage"] + ")" + "</th>");
		document.write("</tr>");
		
		for ( i = 0; i < (json['filtered'].length); i++){
			if (color == true) {
				document.write("<tr id=\"type-1\">");
				color = !color
			}
			else {
				document.write("<tr id=\"type-2\">");
				color = !color
			}
				var time = realDate(json['filtered'][i]['date'])+""
				document.write("<td>" + time.split(" ")[4] + "</td>");
				document.write("<td>" + (json['filtered'][i]['stationName']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['objectName']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['frameCounter']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['resetCounter']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['currentFlightPhase']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['currentFlightPhaseDuration']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['systemTimeReset']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['RTCTime']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['fixGPS']) + "</td>");
				if (json['filtered'][i]['fixGPS'] == "V"){ // No GPS fix, the GPS data is replaced by null.png
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
					document.write("<td><img src=\"../ressources/img/null.png\"></td>");
				}
				else{
					document.write("<td>" + (json['filtered'][i]['GPSTime']) + "</td>");
					document.write("<td>" + (json['filtered'][i]['longGPS']) + "</td>");
					document.write("<td>" + (json['filtered'][i]['latGPS']) + "</td>");
					document.write("<td>" + (json['filtered'][i]['altGPS']) + "</td>");
					document.write("<td>" + (json['filtered'][i]['speedGPS']) + "</td>");
					document.write("<td>" + (json['filtered'][i]['capGPS']) + "</td>");
					document.write("<td>" + "<img src=\"" + '../ressources/img/' + guessCapImgName(json['filtered'][i]['capGPS']) + "\">" + "</td>");
				}
				document.write("<td>" + (json['filtered'][i]['numSatsGPS']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['hdop']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['sensor1']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['sensor2']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['sensor3']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['sensor4']) + "</td>");
				document.write("<td>" + (json['filtered'][i]['voltage']) + "</td>");
			document.write("</tr>");
		}
		document.write("</table>");
		document.write("</div>");
		</script>
	</body>
</html>